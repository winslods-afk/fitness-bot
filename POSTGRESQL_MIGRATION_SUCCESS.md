# ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ PostgreSQL –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!

## üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!

–í–∞—à –±–æ—Ç —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç PostgreSQL! –í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ.

## ‚úÖ –ß—Ç–æ –≤–∏–¥–Ω–æ –≤ –ª–æ–≥–∞—Ö:

```
DATABASE_URL: postgresql+asyncpg://postgres:***@***
Database type: PostgreSQL
PostgreSQL database - –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞
```

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç:
- ‚úÖ PostgreSQL –ø–æ–¥–∫–ª—é—á–µ–Ω
- ‚úÖ –¢–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã
- ‚úÖ –ë–æ—Ç –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ
- ‚úÖ –î–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç —Å–æ—Ö—Ä–∞–Ω—è—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–∞–±–ª–∏—Ü—ã –≤ PostgreSQL

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ PostgreSQL
railway connect postgres

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–∞–±–ª–∏—Ü—ã
\dt

# –î–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ç–∞–±–ª–∏—Ü—ã:
# - users
# - sessions
# - workout_days
# - exercises
# - sets
# - session_runs
# - performed_sets
```

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É –±–æ—Ç–∞

1. **–û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞ –≤ Telegram**
2. **–î–æ–±–∞–≤—å—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é –ø—Ä–æ–≥—Ä–∞–º–º—É:**
   - –ù–∞–∂–º–∏—Ç–µ "–ú–æ–∏ –ü—Ä–æ–≥—Ä–∞–º–º—ã —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫"
   - –í—ã–±–µ—Ä–∏—Ç–µ "–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É"
   - –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ—Å—Ç—É—é –ø—Ä–æ–≥—Ä–∞–º–º—É (1 –¥–µ–Ω—å, 1 —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ)
   - –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –ø—Ä–æ–≥—Ä–∞–º–º—É

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–∞–Ω–Ω—ã–µ –≤ PostgreSQL:**
   ```bash
   railway connect postgres
   SELECT * FROM users;
   SELECT * FROM sessions;
   SELECT * FROM exercises;
   ```

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

1. **–°–¥–µ–ª–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –¥–µ–ø–ª–æ–π:**
   ```bash
   git commit --allow-empty -m "Test PostgreSQL persistence"
   git push
   ```

2. **–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞ –≤ Telegram
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –æ—Å—Ç–∞–ª–∞—Å—å
   - ‚úÖ –ï—Å–ª–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –æ—Å—Ç–∞–ª–∞—Å—å - –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è!

## üîç SQL –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã:

```sql
SELECT table_name 
FROM information_schema.tables 
WHERE table_schema = 'public'
ORDER BY table_name;
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π:

```sql
SELECT 
    'users' as table_name, COUNT(*) as count FROM users
UNION ALL
SELECT 'sessions', COUNT(*) FROM sessions
UNION ALL
SELECT 'workout_days', COUNT(*) FROM workout_days
UNION ALL
SELECT 'exercises', COUNT(*) FROM exercises
UNION ALL
SELECT 'sets', COUNT(*) FROM sets
UNION ALL
SELECT 'session_runs', COUNT(*) FROM session_runs
UNION ALL
SELECT 'performed_sets', COUNT(*) FROM performed_sets;
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã:

```sql
SELECT 
    s.session_id,
    s.name as program_name,
    s.created_at,
    u.telegram_id
FROM sessions s
JOIN users u ON s.user_id = u.id
ORDER BY s.created_at DESC
LIMIT 10;
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏:

```sql
SELECT 
    sr.id,
    sr.started_at,
    s.name as program_name,
    u.telegram_id,
    COUNT(ps.id) as sets_count
FROM session_runs sr
JOIN sessions s ON sr.session_id = s.session_id
JOIN users u ON sr.user_id = u.id
LEFT JOIN performed_sets ps ON ps.session_run_id = sr.id
GROUP BY sr.id, sr.started_at, s.name, u.telegram_id
ORDER BY sr.started_at DESC
LIMIT 10;
```

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ PostgreSQL

–¢–µ–ø–µ—Ä—å –≤–∞—à –±–æ—Ç –∏–º–µ–µ—Ç:
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö** - –¥–∞–Ω–Ω—ã–µ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —Ç–µ—Ä—è—é—Ç—Å—è
- ‚úÖ **–ù–µ –Ω—É–∂–µ–Ω volume** - –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ **–õ–µ–≥–∫–∏–π –¥–æ—Å—Ç—É–ø** - –º–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ DBeaver, pgAdmin
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã** - Railway –¥–µ–ª–∞–µ—Ç –±—ç–∫–∞–ø—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –ª–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è–µ—Ç—Å—è –ø—Ä–∏ —Ä–æ—Å—Ç–µ –Ω–∞–≥—Ä—É–∑–∫–∏
- ‚úÖ **–î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –º–µ–∂–¥—É –¥–µ–ø–ª–æ—è–º–∏** - –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å volume

## üîó –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ DBeaver

–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ DBeaver:

1. –°–º. –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é: [DBEAVER_RAILWAY_CONNECTION.md](DBEAVER_RAILWAY_CONNECTION.md)
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `DATABASE_URL` –∏–∑ Railway Dashboard
3. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ PostgreSQL –∏ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–π—Ç–µ –¥–∞–Ω–Ω—ã–µ

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [CHECK_POSTGRESQL_MIGRATION.md](CHECK_POSTGRESQL_MIGRATION.md) - –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–∏
- [DBEAVER_RAILWAY_CONNECTION.md](DBEAVER_RAILWAY_CONNECTION.md) - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ DBeaver
- [RAILWAY_POSTGRESQL_SETUP.md](RAILWAY_POSTGRESQL_SETUP.md) - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PostgreSQL

## ‚ú® –ß—Ç–æ –¥–∞–ª—å—à–µ?

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–æ—Ç–∞ –∫–∞–∫ –æ–±—ã—á–Ω–æ** - –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
2. **–î–æ–±–∞–≤–ª—è–π—Ç–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã** - –æ–Ω–∏ –±—É–¥—É—Ç —Å–æ—Ö—Ä–∞–Ω—è—Ç—å—Å—è –≤ PostgreSQL
3. **–ü—Ä–æ–≤–æ–¥–∏—Ç–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏** - –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç —Å–æ—Ö—Ä–∞–Ω—è—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
4. **–î–µ–ø–ª–æ–π—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è** - –¥–∞–Ω–Ω—ã–µ –Ω–µ –±—É–¥—É—Ç —Ç–µ—Ä—è—Ç—å—Å—è

## üéâ –ì–æ—Ç–æ–≤–æ!

–í–∞—à –±–æ—Ç —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç PostgreSQL –∏ –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç —Å–æ—Ö—Ä–∞–Ω—è—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –º–µ–∂–¥—É –¥–µ–ø–ª–æ—è–º–∏!

---

**–ü—Ä–∏—è—Ç–Ω—ã—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫! üí™**

