# Пошаговая инструкция: Создание Volume для базы данных

## Способ 1: Через Railway CLI (интерактивно)

### Шаг 1: Выберите сервис

Откройте PowerShell или терминал и выполните:

```powershell
cd C:\Users\Roman\fitness-bot
railway service
```

Появится меню выбора сервиса:
```
? Select a service  
> web
```

Нажмите **Enter** чтобы выбрать `web`.

### Шаг 2: Создайте volume

После выбора сервиса выполните:

```powershell
railway volume add --mount-path /data
```

Volume будет создан и автоматически привязан к сервису `web` с mount path `/data`.

### Шаг 3: Проверьте создание

```powershell
railway volume list
```

Должен появиться новый volume с mount path `/data`.

### Шаг 4: Деплой

Сделайте коммит и пуш (изменения уже в репозитории):

```powershell
git add -A
git commit -m "Add volume configuration"
git push
```

## Способ 2: Через Railway Dashboard

Если CLI не работает, попробуйте через Dashboard:

1. **Откройте Railway Dashboard**
   - Перейдите на https://railway.app
   - Выберите ваш проект

2. **Откройте сервис "web"**
   - Нажмите на сервис `web` в списке сервисов

3. **Найдите раздел "Volumes" или "Storage"**
   - В настройках сервиса найдите раздел для volumes
   - Или перейдите в **Settings** → **Volumes**

4. **Создайте volume**
   - Нажмите **"+ New Volume"** или **"Add Volume"**
   - Укажите:
     - **Name**: `database-storage` (или любое имя)
     - **Mount Path**: `/data`
   - Нажмите **"Create"** или **"Add"**

5. **Проверьте конфигурацию**
   - Убедитесь, что volume создан и привязан к сервису
   - Mount path должен быть `/data`

## Способ 3: Альтернативное решение (если volumes не работают)

Если volumes не работают, можно использовать переменную окружения для указания пути к БД, но это **не решит проблему персистентности**. 

В этом случае лучше использовать **PostgreSQL** на Railway:

1. В Railway Dashboard добавьте сервис **PostgreSQL**
2. Railway автоматически создаст переменную `DATABASE_URL`
3. Обновите `app/config.py` для использования PostgreSQL вместо SQLite

Но для начала попробуйте создать volume через CLI (Способ 1) - это самый простой способ.

## После создания volume

1. **Дождитесь деплоя** (Railway автоматически задеплоит изменения)
2. **Проверьте логи:**
   ```powershell
   railway logs
   ```
   Должно быть: `База данных инициализирована`

3. **Протестируйте:**
   - Добавьте программу через бота
   - Сделайте новый деплой (измените что-то в коде)
   - Проверьте, что программа осталась после деплоя

## Важно

- ✅ Volume создается **один раз** и сохраняется между деплоями
- ⚠️ Если вы удалите volume, все данные будут потеряны
- ✅ Используйте команду `/export_db` для резервного копирования базы данных

