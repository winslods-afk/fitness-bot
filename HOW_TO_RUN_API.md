# –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∏ –≤—ã–∑–≤–∞—Ç—å API endpoint

## –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```bash
pip install -r requirements.txt
```

–ò–ª–∏ –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:

```bash
# –°–æ–∑–¥–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —Å–æ–∑–¥–∞–Ω–æ)
python -m venv venv

# –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
# Windows:
venv\Scripts\activate
# Linux/Mac:
source venv/bin/activate

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt
```

## –®–∞–≥ 2: –ó–∞–ø—É—Å–∫ API —Å–µ—Ä–≤–µ—Ä–∞

–ó–∞–ø—É—Å—Ç–∏—Ç–µ API —Å–µ—Ä–≤–µ—Ä:

```bash
python api_server.py
```

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ:

```
INFO:     Started server process
INFO:     Waiting for application startup.
INFO:     –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è API...
INFO:     –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
```

‚úÖ **API —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ `http://localhost:8000`**

## –®–∞–≥ 3: –í—ã–∑–æ–≤ endpoint

### –í–∞—Ä–∏–∞–Ω—Ç 1: Postman (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. **–ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –∫–æ–ª–ª–µ–∫—Ü–∏—é:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ Postman
   - –ù–∞–∂–º–∏—Ç–µ **Import** (–ª–µ–≤—ã–π –≤–µ—Ä—Ö–Ω–∏–π —É–≥–æ–ª)
   - –í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª `Fitness_Bot_API.postman_collection.json`
   - –ù–∞–∂–º–∏—Ç–µ **Import**

2. **–ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):**
   - –ù–∞–∂–º–∏—Ç–µ **Import** —Å–Ω–æ–≤–∞
   - –í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª `Fitness_Bot_API.postman_environment.json`
   - –í—ã–±–µ—Ä–∏—Ç–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ "Fitness Bot API - Local" –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É

3. **–û—Ç–ø—Ä–∞–≤—å—Ç–µ –∑–∞–ø—Ä–æ—Å:**
   - –í –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –≤—ã–±–µ—Ä–∏—Ç–µ –∑–∞–ø—Ä–æ—Å **"Get Users with Programs"**
   - –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **Send**
   - –£–≤–∏–¥–∏—Ç–µ –æ—Ç–≤–µ—Ç —Å –¥–∞–Ω–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –í–∞—Ä–∏–∞–Ω—Ç 2: cURL (–∫–æ–º–∞–Ω–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞)

```bash
curl -H "X-API-Key: dotainstructor" http://localhost:8000/api/users
```

–î–ª—è –∫—Ä–∞—Å–∏–≤–æ–≥–æ –≤—ã–≤–æ–¥–∞ (–µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω `jq`):

```bash
curl -H "X-API-Key: dotainstructor" http://localhost:8000/api/users | jq
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: PowerShell (Windows)

```powershell
Invoke-RestMethod -Uri "http://localhost:8000/api/users" -Headers @{"X-API-Key"="dotainstructor"}
```

### –í–∞—Ä–∏–∞–Ω—Ç 4: –ë—Ä–∞—É–∑–µ—Ä (—Ç–æ–ª—å–∫–æ –¥–ª—è GET –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)

‚ö†Ô∏è **–í–Ω–∏–º–∞–Ω–∏–µ:** –ë—Ä–∞—É–∑–µ—Ä –Ω–µ –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫ `X-API-Key`, –ø–æ—ç—Ç–æ–º—É –ø–æ–ª—É—á–∏—Ç–µ –æ—à–∏–±–∫—É 401.

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:

```
http://localhost:8000/health
```

–ò–ª–∏:

```
http://localhost:8000/
```

### –í–∞—Ä–∏–∞–Ω—Ç 5: Python (requests)

```python
import requests

url = "http://localhost:8000/api/users"
headers = {"X-API-Key": "dotainstructor"}

response = requests.get(url, headers=headers)
print(response.json())
```

### –í–∞—Ä–∏–∞–Ω—Ç 6: JavaScript (fetch)

```javascript
fetch('http://localhost:8000/api/users', {
  headers: {
    'X-API-Key': 'dotainstructor'
  }
})
  .then(response => response.json())
  .then(data => console.log(data));
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API

```bash
curl http://localhost:8000/health
```

–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å:
```json
{"status": "ok"}
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä–Ω–µ–≤–æ–≥–æ endpoint

```bash
curl http://localhost:8000/
```

–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± API.

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ endpoint

```bash
curl -H "X-API-Key: dotainstructor" http://localhost:8000/api/users
```

–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å JSON —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –ø—Ä–æ–≥—Ä–∞–º–º–∞–º–∏.

## –û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç

–ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –∑–∞–ø—Ä–æ—Å–µ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ:

```json
{
  "users": [
    {
      "id": 1,
      "telegram_id": 123456789,
      "username": "user123",
      "created_at": "2025-01-01T12:00:00",
      "programs_count": 2,
      "programs": [
        {
          "id": 1,
          "name": "–ü—Ä–æ–≥—Ä–∞–º–º–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫",
          "created_at": "2025-01-01T12:00:00"
        }
      ]
    }
  ],
  "total_users": 1,
  "total_programs": 2
}
```

## –í–æ–∑–º–æ–∂–Ω—ã–µ –æ—à–∏–±–∫–∏

### –û—à–∏–±–∫–∞: Connection refused

**–ü—Ä–∏—á–∏–Ω–∞:** API —Å–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—â–µ–Ω

**–†–µ—à–µ–Ω–∏–µ:** –ó–∞–ø—É—Å—Ç–∏—Ç–µ `python api_server.py`

### –û—à–∏–±–∫–∞: 401 Unauthorized

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ —É–∫–∞–∑–∞–Ω –∑–∞–≥–æ–ª–æ–≤–æ–∫ `X-API-Key`

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤—å—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫ `X-API-Key: dotainstructor`

### –û—à–∏–±–∫–∞: 403 Forbidden

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–≤–µ—Ä–Ω—ã–π API –∫–ª—é—á

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ `dotainstructor`

### –û—à–∏–±–∫–∞: ModuleNotFoundError

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

**–†–µ—à–µ–Ω–∏–µ:** –í—ã–ø–æ–ª–Ω–∏—Ç–µ `pip install -r requirements.txt`

## –ó–∞–ø—É—Å–∫ –Ω–∞ Railway

–ï—Å–ª–∏ –≤—ã —Ä–∞–∑–≤–µ—Ä–Ω—É–ª–∏ API –Ω–∞ Railway:

1. –ü–æ–ª—É—á–∏—Ç–µ URL –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `https://your-app.railway.app`)
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ—Ç URL –≤–º–µ—Å—Ç–æ `localhost:8000`
3. –û—Å—Ç–∞–ª—å–Ω–æ–µ –æ—Å—Ç–∞–µ—Ç—Å—è —Ç–µ–º –∂–µ

–ü—Ä–∏–º–µ—Ä:
```bash
curl -H "X-API-Key: dotainstructor" https://your-app.railway.app/api/users
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ base_url –≤ Postman

**–ü–æ—á–µ–º—É `http://localhost:8000`?** –≠—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.

–î–ª—è Railway:
1. –í Postman –æ—Ç–∫—Ä–æ–π—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–∏–∫–æ–Ω–∫–∞ –≥–ª–∞–∑–∞ üëÅÔ∏è)
2. –ò–∑–º–µ–Ω–∏—Ç–µ `base_url` –Ω–∞ URL –≤–∞—à–µ–≥–æ Railway —Å–µ—Ä–≤–∏—Å–∞
3. –ò–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ "Railway" —Å –Ω—É–∂–Ω—ã–º URL

–ü–æ–¥—Ä–æ–±–Ω–µ–µ: —Å–º. `POSTMAN_ENVIRONMENTS.md`

## Swagger UI (–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:

```
http://localhost:8000/docs
```

–ó–¥–µ—Å—å –º–æ–∂–Ω–æ:
- –£–≤–∏–¥–µ—Ç—å –≤—Å–µ endpoints
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å API –ø—Ä—è–º–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- –£–≤–∏–¥–µ—Ç—å —Å—Ö–µ–º—ã –¥–∞–Ω–Ω—ã—Ö

‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –í Swagger UI –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –≤–≤–µ—Å—Ç–∏ API –∫–ª—é—á `dotainstructor` –≤ –ø–æ–ª–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.

## –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

–í—ã–ø–æ–ª–Ω–∏—Ç–µ —ç—Ç—É –∫–æ–º–∞–Ω–¥—É –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏:

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
curl http://localhost:8000/health

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ endpoint
curl -H "X-API-Key: dotainstructor" http://localhost:8000/api/users
```

–ï—Å–ª–∏ –æ–±–µ –∫–æ–º–∞–Ω–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç - API –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ! ‚úÖ

