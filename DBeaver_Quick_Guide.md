# üöÄ –ë—ã—Å—Ç—Ä–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL —á–µ—Ä–µ–∑ DBeaver

## –®–∞–≥ 1: –ü–æ–ª—É—á–∏—Ç–µ DATABASE_URL –∏–∑ Railway

### –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ Railway Dashboard (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. **–û—Ç–∫—Ä–æ–π—Ç–µ Railway Dashboard:** https://railway.app
2. **–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç**
3. **–í—ã–±–µ—Ä–∏—Ç–µ —Å–µ—Ä–≤–∏—Å PostgreSQL** (–Ω–µ —Å–µ—Ä–≤–∏—Å –±–æ—Ç–∞!)
4. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "Variables"**
5. **–ù–∞–π–¥–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `DATABASE_URL`**
6. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ** (—Ñ–æ—Ä–º–∞—Ç: `postgresql://user:password@host:port/database`)

### –°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ Railway CLI

```bash
railway service  # –í—ã–±–µ—Ä–∏—Ç–µ PostgreSQL
railway variables get DATABASE_URL
```

### –°–ø–æ—Å–æ–± 3: –ü–æ–ª—É—á–∏—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–π URL (–µ—Å–ª–∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)

1. **–í Railway Dashboard –≤—ã–±–µ—Ä–∏—Ç–µ —Å–µ—Ä–≤–∏—Å PostgreSQL**
2. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "Connect"**
3. **–ù–∞–π–¥–∏—Ç–µ —Ä–∞–∑–¥–µ–ª "Public Networking"**
4. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ `DATABASE_PUBLIC_URL`** (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω)
5. **–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `DATABASE_URL` —Å –ø—É–±–ª–∏—á–Ω—ã–º —Ö–æ—Å—Ç–æ–º**

**–í–∞–∂–Ω–æ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–π URL (—Å —Ö–æ—Å—Ç–æ–º `*.railway.app` –∏–ª–∏ `*.proxy.rlwy.net`), –∞ –Ω–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π (`*.railway.internal`).

## –®–∞–≥ 2: –ü–∞—Ä—Å–∏–Ω–≥ DATABASE_URL

–í–∞—à `DATABASE_URL` –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:
```
postgresql://user:password@host:port/database
```

–ü—Ä–∏–º–µ—Ä:
```
postgresql://postgres:dVbogRUfVgauuoQVglvnUizZhcYDiGBY@switchback.proxy.rlwy.net:14062/railway
```

**–†–∞–∑–±–∏—Ä–∞–µ–º –Ω–∞ —á–∞—Å—Ç–∏:**
- **Host (—Ö–æ—Å—Ç):** `switchback.proxy.rlwy.net`
- **Port (–ø–æ—Ä—Ç):** `14062`
- **Database (–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö):** `railway`
- **User (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å):** `postgres`
- **Password (–ø–∞—Ä–æ–ª—å):** `dVbogRUfVgauuoQVglvnUizZhcYDiGBY`

## –®–∞–≥ 3: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ DBeaver (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)

1. **–°–∫–∞—á–∞–π—Ç–µ DBeaver:** https://dbeaver.io/download/
2. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ DBeaver Community Edition** (–±–µ—Å–ø–ª–∞—Ç–Ω–∞—è –≤–µ—Ä—Å–∏—è)
3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ DBeaver**

## –®–∞–≥ 4: –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤ DBeaver

1. **–û—Ç–∫—Ä–æ–π—Ç–µ DBeaver**
2. **–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∏–∫–æ–Ω–∫—É "New Database Connection"** (–≤–∏–ª–∫–∞/–ø–ª—é—Å) –∏–ª–∏ `File` ‚Üí `New` ‚Üí `Database Connection`
3. **–í—ã–±–µ—Ä–∏—Ç–µ "PostgreSQL"** –∏–∑ —Å–ø–∏—Å–∫–∞
4. **–ù–∞–∂–º–∏—Ç–µ "Next"**

## –®–∞–≥ 5: –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

‚ö†Ô∏è **–í–ê–ñ–ù–û:** –ù–µ –≤—Å—Ç–∞–≤–ª—è–π—Ç–µ –ø–æ–ª–Ω—ã–π URL –≤ –ø–æ–ª–µ "URL"! –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∫–∞–∂–¥–æ–µ –ø–æ–ª–µ –≤—Ä—É—á–Ω—É—é.

### –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

1. **Host (–ì–ª–∞–≤–Ω—ã–π):**
   - –í—Å—Ç–∞–≤—å—Ç–µ —Ö–æ—Å—Ç –∏–∑ `DATABASE_URL` (–Ω–∞–ø—Ä–∏–º–µ—Ä: `switchback.proxy.rlwy.net`)

2. **Port (–ü–æ—Ä—Ç):**
   - –í—Å—Ç–∞–≤—å—Ç–µ –ø–æ—Ä—Ç –∏–∑ `DATABASE_URL` (–Ω–∞–ø—Ä–∏–º–µ—Ä: `14062`)

3. **Database (–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö):**
   - –í—Å—Ç–∞–≤—å—Ç–µ –∏–º—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏–∑ `DATABASE_URL` (–æ–±—ã—á–Ω–æ: `railway`)

4. **Username (–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è):**
   - –í—Å—Ç–∞–≤—å—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ `DATABASE_URL` (–æ–±—ã—á–Ω–æ: `postgres`)

5. **Password (–ü–∞—Ä–æ–ª—å):**
   - –í—Å—Ç–∞–≤—å—Ç–µ –ø–∞—Ä–æ–ª—å –∏–∑ `DATABASE_URL` (–Ω–∞–ø—Ä–∏–º–µ—Ä: `dVbogRUfVgauuoQVglvnUizZhcYDiGBY`)
   - ‚úÖ –û—Ç–º–µ—Ç—å—Ç–µ "Save password" (–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å), —á—Ç–æ–±—ã –Ω–µ –≤–≤–æ–¥–∏—Ç—å –∫–∞–∂–¥—ã–π —Ä–∞–∑

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (SSL):

1. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "SSL"**
2. **–û—Ç–º–µ—Ç—å—Ç–µ "Use SSL" (–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å SSL)**
3. **–í—ã–±–µ—Ä–∏—Ç–µ "SSL mode":** `require` –∏–ª–∏ `allow`
4. **–ù–µ —É–∫–∞–∑—ã–≤–∞–π—Ç–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã** (Railway –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã)

### –ò–ª–∏ —á–µ—Ä–µ–∑ –≤–∫–ª–∞–¥–∫—É "Main":

–ï—Å–ª–∏ –≤–∫–ª–∞–¥–∫–∞ "SSL" –Ω–µ –≤–∏–¥–Ω–∞, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–∫–ª–∞–¥–∫—É "Main":
1. **–í —Ä–∞–∑–¥–µ–ª–µ "Connection settings" –Ω–∞–π–¥–∏—Ç–µ "SSL"**
2. **–û—Ç–º–µ—Ç—å—Ç–µ "Use SSL"**
3. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ "SSL Mode":** `require`

## –®–∞–≥ 6: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

1. **–ù–∞–∂–º–∏—Ç–µ "Test Connection" (–¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è)**
2. **–ï—Å–ª–∏ –ø–æ—è–≤–∏—Ç—Å—è –æ–∫–Ω–æ "Download driver" - –Ω–∞–∂–º–∏—Ç–µ "Download"**
3. **–î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≥—Ä—É–∑–∫–∏ –¥—Ä–∞–π–≤–µ—Ä–∞ PostgreSQL**
4. **–ü–æ–≤—Ç–æ—Ä–Ω–æ –Ω–∞–∂–º–∏—Ç–µ "Test Connection"**
5. **–î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ "Connected" (–ü–æ–¥–∫–ª—é—á–µ–Ω–æ)**

### ‚ùå –ï—Å–ª–∏ –ø–æ—è–≤–∏–ª–∞—Å—å –æ—à–∏–±–∫–∞:

**–û—à–∏–±–∫–∞: "Invalid JDBC URL"**
- –†–µ—à–µ–Ω–∏–µ: –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∫–∞–∂–¥–æ–µ –ø–æ–ª–µ –≤—Ä—É—á–Ω—É—é, –Ω–µ –≤—Å—Ç–∞–≤–ª—è–π—Ç–µ –ø–æ–ª–Ω—ã–π URL –≤ –ø–æ–ª–µ "URL"

**–û—à–∏–±–∫–∞: "Connection refused"**
- –†–µ—à–µ–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–π URL (—Å —Ö–æ—Å—Ç–æ–º `*.railway.app` –∏–ª–∏ `*.proxy.rlwy.net`)

**–û—à–∏–±–∫–∞: "SSL required"**
- –†–µ—à–µ–Ω–∏–µ: –í–∫–ª—é—á–∏—Ç–µ SSL –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ä–µ–∂–∏–º `require` –∏–ª–∏ `allow`

**–û—à–∏–±–∫–∞: "Authentication failed"**
- –†–µ—à–µ–Ω–∏–µ: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –ø–∞—Ä–æ–ª—è –∏ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## –®–∞–≥ 7: –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

1. **–ù–∞–∂–º–∏—Ç–µ "Finish" (–ì–æ—Ç–æ–≤–æ)**
2. **–í–≤–µ–¥–∏—Ç–µ –∏–º—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è** (–Ω–∞–ø—Ä–∏–º–µ—Ä: "Railway PostgreSQL")
3. **–ù–∞–∂–º–∏—Ç–µ "OK"**

## –®–∞–≥ 8: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

1. **–í –ª–µ–≤–æ–π –ø–∞–Ω–µ–ª–∏ DBeaver –Ω–∞–π–¥–∏—Ç–µ –≤–∞—à–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ**
2. **–†–∞—Å–∫—Ä–æ–π—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ** (–¥–≤–æ–π–Ω–æ–π –∫–ª–∏–∫ –∏–ª–∏ —Å—Ç—Ä–µ–ª–∫–∞)
3. **–†–∞—Å–∫—Ä–æ–π—Ç–µ "Databases" ‚Üí "railway" ‚Üí "Schemas" ‚Üí "public" ‚Üí "Tables"**
4. **–í—ã —É–≤–∏–¥–∏—Ç–µ –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã:**
   - `users`
   - `sessions`
   - `workout_days`
   - `exercises`
   - `sets`
   - `session_runs`
   - `performed_sets`

## üìä –ü–æ–ª–µ–∑–Ω—ã–µ SQL –∑–∞–ø—Ä–æ—Å—ã

### –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü:

```sql
SELECT table_name 
FROM information_schema.tables 
WHERE table_schema = 'public'
ORDER BY table_name;
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:

```sql
SELECT * FROM users;
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–æ–≥—Ä–∞–º–º:

```sql
SELECT 
    s.session_id,
    s.name as program_name,
    s.created_at,
    u.telegram_id
FROM sessions s
JOIN users u ON s.user_id = u.id
ORDER BY s.created_at DESC;
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫:

```sql
SELECT 
    sr.id,
    sr.started_at,
    s.name as program_name,
    u.telegram_id
FROM session_runs sr
JOIN sessions s ON sr.session_id = s.session_id
JOIN users u ON sr.user_id = u.id
ORDER BY sr.started_at DESC;
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –ø–æ–¥—Ö–æ–¥–æ–≤:

```sql
SELECT 
    ps.id,
    ps.set_index,
    ps.weight,
    ps.timestamp,
    e.name as exercise_name,
    u.telegram_id
FROM performed_sets ps
JOIN exercises e ON ps.exercise_id = e.exercise_id
JOIN session_runs sr ON ps.session_run_id = sr.id
JOIN users u ON sr.user_id = u.id
ORDER BY ps.timestamp DESC
LIMIT 20;
```

## üéØ –ë—ã—Å—Ç—Ä–∞—è —Å–ø—Ä–∞–≤–∫–∞

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏–∑ –≤–∞—à–µ–≥–æ DATABASE_URL:

–ò–∑ –≤–∞—à–∏—Ö –ª–æ–≥–æ–≤ –≤–∏–¥–Ω–æ:
```
postgresql://postgres:dVbogRUfVgauuoQVglvnUizZhcYDiGBY@switchback.proxy.rlwy.net:14062/railway
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è DBeaver:**
- **Host:** `switchback.proxy.rlwy.net`
- **Port:** `14062`
- **Database:** `railway`
- **Username:** `postgres`
- **Password:** `dVbogRUfVgauuoQVglvnUizZhcYDiGBY`
- **SSL:** –í–∫–ª—é—á–µ–Ω, —Ä–µ–∂–∏–º: `require`

## ‚ùì –ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã

### –ö–∞–∫ –æ–±–Ω–æ–≤–∏—Ç—å –ø–∞—Ä–æ–ª—å –≤ DBeaver?

1. –ü—Ä–∞–≤–æ–π –∫–Ω–æ–ø–∫–æ–π –º—ã—à–∏ –Ω–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ ‚Üí "Edit Connection"
2. –í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å
3. –ù–∞–∂–º–∏—Ç–µ "Test Connection"
4. –ù–∞–∂–º–∏—Ç–µ "OK"

### –ö–∞–∫ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ?

1. –ü—Ä–∞–≤–æ–π –∫–Ω–æ–ø–∫–æ–π –º—ã—à–∏ –Ω–∞ —Ç–∞–±–ª–∏—Ü—É ‚Üí "Export Data"
2. –í—ã–±–µ—Ä–∏—Ç–µ —Ñ–æ—Ä–º–∞—Ç (CSV, Excel, JSON –∏ —Ç.–¥.)
3. –ù–∞–∂–º–∏—Ç–µ "Next" –∏ —Å–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º

### –ö–∞–∫ –≤—ã–ø–æ–ª–Ω–∏—Ç—å SQL –∑–∞–ø—Ä–æ—Å?

1. –ü—Ä–∞–≤–æ–π –∫–Ω–æ–ø–∫–æ–π –º—ã—à–∏ –Ω–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ ‚Üí "SQL Editor" ‚Üí "New SQL Script"
2. –í–≤–µ–¥–∏—Ç–µ SQL –∑–∞–ø—Ä–æ—Å
3. –ù–∞–∂–º–∏—Ç–µ "Execute" (Ctrl+Enter)

### –ö–∞–∫ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü—ã?

1. –†–∞—Å–∫—Ä–æ–π—Ç–µ —Ç–∞–±–ª–∏—Ü—É –≤ –ª–µ–≤–æ–π –ø–∞–Ω–µ–ª–∏
2. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ "Columns" - —É–≤–∏–¥–∏—Ç–µ –≤—Å–µ —Å—Ç–æ–ª–±—Ü—ã
3. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ "Data" - —É–≤–∏–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [DBEAVER_RAILWAY_CONNECTION.md](DBEAVER_RAILWAY_CONNECTION.md) - –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
- [RAILWAY_PUBLIC_DATABASE_URL.md](RAILWAY_PUBLIC_DATABASE_URL.md) - –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –ø—É–±–ª–∏—á–Ω—ã–π URL
- [DBEAVER_RAILWAY_FIX.md](DBEAVER_RAILWAY_FIX.md) - –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º

---

**–ì–æ—Ç–æ–≤–æ!** –¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ –≤–∞—à–µ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö PostgreSQL —á–µ—Ä–µ–∑ DBeaver! üéâ

